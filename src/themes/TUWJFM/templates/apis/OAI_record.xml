{% load oai %} 
{% block record %}
<record>
    <header>
        <identifier>oai:{{ http_host }}:{{ article.get_doi }}</identifier>
        <datestamp>{{ article.date_published|oai_datestamp }}</datestamp>
        <setSpec>openaire</setSpec>
    </header>
    <metadata>
        <oai_dc:dc
            xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/"
            xmlns:dc="http://purl.org/dc/elements/1.1/"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/
            http://www.openarchives.org/OAI/2.0/oai_dc.xsd">

            <dc:title>{{ article.title }}{% if article.subtitle %}:{{ article.subtitle }}{% endif %}</dc:title>

            {% for author in article.authors.all %}
                <dc:creator>{{author.last_name}}, {{author.first_name}}</dc:creator>
            {% endfor %}

            {% if article.language == 'eng' %}
                {% if article.keywords %}
                    {% for x in article.keywords_lang_en %}
                        <dc:subject>{{ x }}</dc:subject>
                    {% endfor %}
                {% else %}
                    {% for x in article.keywords_lang_de %}
                        <dc:subject>{{ x }}</dc:subject>
                    {% endfor %}
                {% endif %}
            {% endif %}

            {% if article.language == 'deu' %}
                {% if article.keywords_de %}
                    {% for x in article.keywords_lang_de %}
                        <dc:subject>{{ x }}</dc:subject>
                    {% endfor %}
                {% else %}
                    {% for x in article.keywords.lang_en %}
                        <dc:subject>{{ x }}</dc:subject>
                    {% endfor %}
                {% endif %}
            {% endif %}

            {% if article.language == 'deu' %}
                {% if article.abstract_de_tuw %}
                    <dc:description>{{ article.abstract_de_tuw }}</dc:description>
                {% else %}
                    {% if article.abstract %}
                        <dc:description>{{ article.abstract }}</dc:description>
                    {% endif %}
                {% endif %}
            {% endif %}

            {% if article.language == 'eng' %}
                {% if article.abstract %}
                    <dc:description>{{ article.abstract }}</dc:description>
                {% else %}
                    {% if article.abstract_de_tuw %}
                        <dc:description>{{ article.abstract_de_tuw }}</dc:description>
                    {% endif %}
                {% endif %}
            {% endif %}
                        
            {% if journal.code == 'JFM' %}
                <dc:publisher>IFM - Real Estate and Facility Management, Institute of Management Science, Vienna University of Technology</dc:publisher>
            {% endif %}
            {% if journal.code == 'OES' %}
                <dc:publisher>Centre of Public Finance and Infrastructure Policy, Institute of Spatial Planning, TU Wien</dc:publisher>
            {% endif %}

            <dc:language>{{ article.language }}</dc:language>
            <dc:date>{{ article.date_published|date:"Y" }}</dc:date>
            <dc:type>info:eu-repo/semantics/article</dc:type>
            <dc:format>application/pdf</dc:format>
            <dc:rights>info:eu-repo/semantics/openAccess</dc:rights>
            <dc:rights>{{ article.license.url }}</dc:rights>
            <dc:identifier>https://{{ http_host }}/article/id/{{ article.id }}/</dc:identifier>
            {% if article.get_doi %}
            <dc:identifier>info:doi:{{ article.get_doi }}</dc:identifier>
            {% endif %}
            {% if article.get_urn %}
            <dc:identifier>{{ article.get_urn }}</dc:identifier>
            {% endif %}
        </oai_dc:dc>
    </metadata>
</record>
{% endblock %}